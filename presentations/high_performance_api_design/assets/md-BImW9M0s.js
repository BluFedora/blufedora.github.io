import{_ as o}from"./slidev/CodeBlockWrapper.vue_vue_type_script_setup_true_lang-C5ozMGWO.js";import{b as d,o as p,w as a,g as i,e as l,m as r,B as e,v as f,x as g,C as n}from"./modules/vue-CNSExgwE.js";import{I as c}from"./slidev/default-BdI_aIAh.js";import{u,f as y}from"./slidev/context-C41pcUyb.js";import"./modules/unplugin-icons-SzvYn5pG.js";import"./index-DUXqzHg5.js";import"./modules/shiki-CdPLP8fG.js";const E={__name:"slides.md__slidev_12",setup(m){const{$clicksContext:h,$frontmatter:k}=u();return h.setup(),(A,s)=>{const t=o;return p(),d(c,f(g(n(y)(n(k),11))),{default:a(()=>[s[2]||(s[2]=i("h1",null,"File Read",-1)),l(t,r({},{title:"classic-io.cpp",ranges:[]}),{default:a(()=>s[0]||(s[0]=[i("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light slidev-code",style:{"--shiki-dark":"#dbd7caee","--shiki-light":"#393a34","--shiki-dark-bg":"#121212","--shiki-light-bg":"#ffffff"}},[i("code",{class:"language-cpp"},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#758575DD","--shiki-light":"#A0ADA0"}},"// 1. Forces a copy to a user buffer even if the File Stream is already in memory.")]),e(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#758575DD","--shiki-light":"#A0ADA0"}},"// 2. Uses an implicit file pointer so multi-threaded access must be serialized.")]),e(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#758575DD","--shiki-light":"#A0ADA0"}},"// 3. User force to deal with partial reads other than end of file but rarely does anyone do that.")]),e(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#CB7676","--shiki-light":"#AB5959"}},"size_t"),i("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}}," Read"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"("),i("span",{style:{"--shiki-dark":"#5DA994","--shiki-light":"#2E8F82"}},"user_buffer"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},","),i("span",{style:{"--shiki-dark":"#5DA994","--shiki-light":"#2E8F82"}}," size"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},");")])])],-1)])),_:1,__:[0]},16),s[3]||(s[3]=i("ul",null,[i("li",null,[i("a",{href:"https://fgiesen.wordpress.com/2011/11/21/buffer-centric-io/",target:"_blank"},"Buffer Centric IO by Fabian “ryg” Giesen"),e(" Read the article for a more information on why the this API leads to a lot of inefficiencies.")])],-1)),l(t,r({},{title:"buffer-centric-io.cpp",ranges:[]}),{default:a(()=>s[1]||(s[1]=[i("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light slidev-code",style:{"--shiki-dark":"#dbd7caee","--shiki-light":"#393a34","--shiki-dark-bg":"#121212","--shiki-light-bg":"#ffffff"}},[i("code",{class:"language-cpp"},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#758575DD","--shiki-light":"#A0ADA0"}},"// 1. Key Idea: Expose the backend's buffer directly.")]),e(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#758575DD","--shiki-light":"#A0ADA0"}},"//    User gets to choose to copy it or just read it.")]),e(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#758575DD","--shiki-light":"#A0ADA0"}},"// 2. Old Read API can easily be built on top of this.")]),e(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#5DA994","--shiki-light":"#2E8F82"}},"ArrayView"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"<"),i("span",{style:{"--shiki-dark":"#5DA994","--shiki-light":"#2E8F82"}},"byte"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},">"),i("span",{style:{"--shiki-dark":"#80A665","--shiki-light":"#59873A"}}," Read"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},"("),i("span",{style:{"--shiki-dark":"#5DA994","--shiki-light":"#2E8F82"}},"offset"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},","),i("span",{style:{"--shiki-dark":"#5DA994","--shiki-light":"#2E8F82"}}," size"),i("span",{style:{"--shiki-dark":"#666666","--shiki-light":"#999999"}},");")])])],-1)])),_:1,__:[1]},16),s[4]||(s[4]=i("ul",null,[i("li",null,[e("Windows: "),i("a",{href:"https://learn.microsoft.com/en-us/windows/win32/api/fileapi/nf-fileapi-readfile",target:"_blank"},"ReadFile(file, buffer, size, *out_bytes_read, OVERLAPPED.Offset)")]),i("li",null,[e("Unix: "),i("a",{href:"https://man7.org/linux/man-pages/man2/pwrite.2.html",target:"_blank"},"pread(file, buffer, size, offset)")])],-1))]),_:1,__:[2,3,4]},16)}}};export{E as default};
